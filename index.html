<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë”°ë¼ì½ëŠ” êµ¬êµ¬ë‹¨</title>
    
    <!-- 1. ì‚¬ìš´ë“œ ë¼ì´ë¸ŒëŸ¬ë¦¬ (Tone.js) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    
    <!-- 2. ìœ ì•„ìš© í°íŠ¸ (Google Fonts) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&display=swap" rel="stylesheet">

    <!-- 3. CSS ìŠ¤íƒ€ì¼ (ìœ ì•„ìš© ë””ìì¸) -->
    <style>
        /* ê¸°ë³¸ ì„¤ì • */
        :root {
            --font-family: 'Gaegu', cursive; /* ì†ê¸€ì”¨ í°íŠ¸ */
            --bg-color: #fffbeb; /* ë”°ëœ»í•œ ë…¸ë€ìƒ‰ ë°°ê²½ */
            --card-bg: #ffffff;
            --text-color: #44403c;
            --primary-color: #22c55e; /* Green (Success) */
            --secondary-color: #3b82f6; /* Blue (Problem) */
            --danger-color: #ef4444; /* Red (Danger) */
            --warning-color: #f97316; /* Orange (Read Aloud) */
            --light-gray: #f1f5f9;
            --shadow-color: rgba(0, 0, 0, 0.08);
            --shadow-press: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: var(--text-color);
            /* ê¸€ì”¨ê°€ ëœ ê¹¨ì ¸ë³´ì´ê²Œ */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ê²Œì„ê¸° ëª¨ì–‘ì˜ ì•± ì»¨í…Œì´ë„ˆ */
        .game-container {
            width: 90%;
            max-width: 340px; 
            background-color: var(--card-bg);
            border-radius: 24px; 
            box-shadow: 0 12px 35px var(--shadow-color);
            border: 2px solid #ffffff;
            padding: 1.5rem; 
            box-sizing: border-box;
            /* ë†’ì´ ìë™ ì¡°ì ˆ (ìŠ¤í¬ë¡¤ ë°©ì§€) */
            height: auto;
        }

        /* ìƒë‹¨ ì œëª© */
        h1 {
            font-size: 1.75rem; 
            font-weight: 700;
            color: var(--text-color);
            margin: 0 0 0.75rem 0; 
            text-align: center;
        }

        /* ë¬¸ì œ í‘œì‹œ ì˜ì—­ */
        .display {
            background-color: #fafafa;
            border: 2px solid #f4f4f5;
            border-radius: 16px;
            padding: 1rem; 
            text-align: center;
            margin-bottom: 1rem; 
            min-height: 50px; 
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.25rem; 
            font-weight: 700;
            color: var(--secondary-color);
            letter-spacing: 2px;
            transition: all 0.2s ease-in-out;
            white-space: nowrap; /* ì¤„ë°”ê¿ˆ ë°©ì§€ */
        }

        #problem-text {
            color: var(--text-color);
        }
        
        #answer-text {
            min-width: 40px; 
            display: inline-block;
        }

        /* í”¼ë“œë°± íš¨ê³¼ (ë¶€ë“œëŸ¬ìš´ í…Œë‘ë¦¬ ê°•ì¡°) */
        .display.correct {
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.3);
        }
        .display.incorrect {
            border-color: var(--danger-color);
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.3);
        }

        /* ìˆ«ì í‚¤íŒ¨ë“œ */
        .keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem; 
            margin-bottom: 0.75rem; 
        }

        /* ìº”ë””/ë¸”ë¡ ê°™ì€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .keypad button {
            font-family: var(--font-family);
            font-size: 1.75rem; 
            font-weight: 700;
            padding: 1rem 0; 
            border: none;
            border-radius: 16px; /* ë‘¥ê·¼ ë²„íŠ¼ */
            background-color: var(--light-gray);
            color: #334155;
            cursor: pointer;
            
            /* 3D ë²„íŠ¼ íš¨ê³¼ */
            border-bottom: 4px solid #d1d5db; 
            transition: all 0.1s ease-in-out;
        }

        .keypad button:active {
            /* ëˆŒë €ì„ ë•Œ */
            border-bottom-width: 0;
            transform: translateY(4px);
            background-color: #e5e7eb;
        }

        /* 'ì§€ìš°ê¸°' ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .keypad .btn-clear {
            grid-column: 2 / 4;
            background-color: #fee2e2; /* í•‘í¬ */
            color: var(--danger-color);
            border-bottom-color: #fca5a5;
            font-size: 1.25rem; 
        }
        .keypad .btn-clear:active {
            background-color: #fecaca;
        }

        /* 2ë‹¨ ë¶ˆëŸ¬ì£¼ê¸° ë²„íŠ¼ */
        .read-aloud-btn {
            width: 100%;
            padding: 1rem 0; 
            font-family: var(--font-family);
            font-size: 1.25rem; 
            font-weight: 700;
            color: #ffffff;
            background-color: var(--warning-color); /* ì£¼í™©ìƒ‰ */
            border: none;
            border-radius: 16px;
            cursor: pointer;
            
            /* 3D ë²„íŠ¼ íš¨ê³¼ */
            border-bottom: 4px solid #fb923c;
            transition: all 0.1s ease-in-out;
        }
        
        .read-aloud-btn:active {
            border-bottom-width: 0;
            transform: translateY(4px);
            background-color: #fb923c;
        }

        .read-aloud-btn:disabled {
            background-color: #d1d5db;
            border-bottom-color: #9ca3af;
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* [NEW] íˆìŠ¤í† ë¦¬ ë¡œê·¸ */
        .history-log {
            font-size: 0.9rem; /* í°íŠ¸ ì•½ê°„ ì‘ê²Œ */
            height: 60px; /* 100px -> 60px (ëª¨ë°”ì¼ í™”ë©´ ë§ì¶¤) */
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            margin-top: 0.75rem; /* 1rem -> 0.75rem */
            padding: 0.75rem;
            overflow-y: auto; /* ë‚´ìš© ë§ì•„ì§€ë©´ ìŠ¤í¬ë¡¤ */
            color: #64748b;
        }
        .history-log p {
            margin: 0 0 0.5rem 0;
            padding: 0;
            font-weight: 700;
        }

    </style>
</head>
<body>

    <!-- 2. HTML êµ¬ì¡° (ë™ì¼) -->
    <div class="game-container">
        <h1 id="title">ğŸµë”°ë¼ì½ëŠ” êµ¬êµ¬ë‹¨ (2ë‹¨)</h1>

        <div class="display" id="display-panel">
            <span id="problem-text">2 X 1 = </span>
            <span id="answer-text">?</span>
        </div>

        <div class="keypad" id="keypad">
            <button class="num-btn" data-num="1">1</button>
            <button class="num-btn" data-num="2">2</button>
            <button class="num-btn" data-num="3">3</button>
            <button class="num-btn" data-num="4">4</button>
            <button class="num-btn" data-num="5">5</button>
            <button class="num-btn" data-num="6">6</button>
            <button class="num-btn" data-num="7">7</button>
            <button class="num-btn" data-num="8">8</button>
            <button class="num-btn" data-num="9">9</button>
            <button class="num-btn btn-zero" data-num="0">0</button>
            <button class="btn-clear" id="clear-btn">ì§€ìš°ê¸°</button>
        </div>

        <button class="read-aloud-btn" id="read-btn">
            2ë‹¨ ë¶ˆëŸ¬ì£¼ê¸°
        </button>

        <!-- [NEW] íˆìŠ¤í† ë¦¬ ë¡œê·¸ ì°½ -->
        <div class="history-log" id="history-log">
            <p style="color: #9ca3af; text-align: center; margin-top: 0.5rem;">ì •ë‹µ ê¸°ë¡</p>
        </div>
    </div>

    <!-- 4. JavaScript (ì‚¬ìš´ë“œ ê¸°ëŠ¥ ëŒ€í­ ì¶”ê°€) -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- 1. í•„ìš”í•œ HTML ìš”ì†Œ ê°€ì ¸ì˜¤ê¸° ---
            const title = document.getElementById('title'); // H1 (ì œëª©)
            const problemText = document.getElementById('problem-text');
            const answerText = document.getElementById('answer-text');
            const displayPanel = document.getElementById('display-panel');
            const keypad = document.getElementById('keypad');
            const clearButton = document.getElementById('clear-btn');
            const readButton = document.getElementById('read-btn');
            const historyLog = document.getElementById('history-log'); // íˆìŠ¤í† ë¦¬ ë¡œê·¸
            
            // --- 2. ì‚¬ìš´ë“œ ë° TTS ì„¤ì • ---
            const synth = window.speechSynthesis;
            
            // "ëµë™" (ì •ë‹µ) ì‚¬ìš´ë“œ
            const successSound = new Tone.Synth({
                oscillator: { type: 'sine' },
                envelope: { attack: 0.01, decay: 0.1, sustain: 0.1, release: 0.2 }
            }).toDestination();
            
            let isAudioReady = false; // ì‚¬ìš©ìê°€ í´ë¦­í•´ì•¼ ì˜¤ë””ì˜¤ ì‹œì‘ ê°€ëŠ¥
            let koVoice = null; // í•œêµ­ì–´ ëª©ì†Œë¦¬
            
            // ë¸Œë¼ìš°ì €ê°€ ëª©ì†Œë¦¬ë¥¼ ë¡œë“œí•˜ë©´ ì‹¤í–‰
            synth.onvoiceschanged = () => {
                const voices = synth.getVoices();
                // iOS 'Sora', 'Yuna' ë“± ë‹¤ë¥¸ ëª©ì†Œë¦¬ ìš°ì„  íƒìƒ‰
                koVoice = voices.find(v => v.lang === 'ko-KR' && v.name.includes('Sora'));
                koVoice = koVoice || voices.find(v => v.lang === 'ko-KR' && v.name.includes('Yuna'));
                koVoice = koVoice || voices.find(v => v.lang === 'ko-KR'); // ì—†ìœ¼ë©´ ì•„ë¬´ í•œêµ­ì–´ ëª©ì†Œë¦¬
            };
            
            // --- 3. ê²Œì„ ìƒíƒœ ë³€ìˆ˜ ---
            let currentDan = 2; // í˜„ì¬ ë‹¨
            let currentStep = 1; // í˜„ì¬ ë‹¨ê³„ (1~9)
            let currentAnswer = 2; // í˜„ì¬ ì •ë‹µ
            let userInput = ""; // ì‚¬ìš©ì ì…ë ¥
            
            // --- 4. í•µì‹¬ í•¨ìˆ˜ ---
            
            // [NEW] ìˆ«ì í•œêµ­ì–´ ì½ê¸° ë³€í™˜ í•¨ìˆ˜
            function numToKorean(num) {
                const units = ['', 'ì¼', 'ì´', 'ì‚¼', 'ì‚¬', 'ì˜¤', 'ìœ¡', 'ì¹ ', 'íŒ”', 'êµ¬'];
                const tens = ['', 'ì‹­', 'ì´ì‹­', 'ì‚¼ì‹­', 'ì‚¬ì‹­', 'ì˜¤ì‹­', 'ìœ¡ì‹­', 'ì¹ ì‹­', 'íŒ”ì‹­', 'êµ¬ì‹­'];
                
                const numStr = String(num);
                let result = '';

                if (numStr.length === 1) {
                    if (num === 0) return 'ì˜';
                    return units[num];
                }

                if (numStr.length === 2) {
                    const ten = parseInt(numStr[0], 10);
                    const unit = parseInt(numStr[1], 10);
                    
                    if (ten > 0) {
                        result += tens[ten];
                        if (ten === 1) result = 'ì‹­'; // 'ì¼ì‹­'ì´ ì•„ë‹ˆë¼ 'ì‹­'
                    }
                    if (unit > 0) {
                        result += units[unit];
                    }
                    return result;
                }
                
                return String(num); // 100 ì´ìƒì€ ê·¸ëƒ¥ ìˆ«ìë¡œ (êµ¬êµ¬ë‹¨ì—ì„  81ì´ ìµœëŒ€)
            }

            // ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸ ì‹œì‘ (í•„ìˆ˜)
            async function startAudio() {
                if (!isAudioReady) {
                    await Tone.start();
                    console.log('Audio Context Started');
                    isAudioReady = true;
                }
            }

            // ìŒì„± ì¬ìƒ í—¬í¼ í•¨ìˆ˜
            function speak(text, pitch = 1.4, rate = 1.1, interrupt = true) { 
                startAudio(); // ì˜¤ë””ì˜¤ê°€ ì‹œì‘ ì•ˆëìœ¼ë©´ ì‹œì‘
                if (interrupt) {
                    synth.cancel(); // ì´ì „ ë§ ëŠê¸°
                }
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ko-KR';
                utterance.pitch = pitch; // í†¤ ë†’ê²Œ
                utterance.rate = rate; // ì¡°ê¸ˆ ë¹ ë¥´ê²Œ
                
                if (koVoice) {
                    utterance.voice = koVoice;
                }
                
                synth.speak(utterance);
            }

            // ìƒˆ ë¬¸ì œ ë¡œë“œ
            function loadProblem() {
                userInput = ""; // ì‚¬ìš©ì ì…ë ¥ ì´ˆê¸°í™”
                currentAnswer = currentDan * currentStep; // í˜„ì¬ ì •ë‹µ ê³„ì‚°
                
                problemText.textContent = `${currentDan} X ${currentStep} = `; // ë¬¸ì œ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
                answerText.textContent = "?"; // ë‹µë³€ í…ìŠ¤íŠ¸ ?ë¡œ ì´ˆê¸°í™”
                answerText.style.color = 'var(--secondary-color)';
            }

            // ì •ë‹µ/ì˜¤ë‹µ í”¼ë“œë°± í•¨ìˆ˜
            function showFeedback(type) {
                displayPanel.classList.add(type); // 'correct' ë˜ëŠ” 'incorrect' í´ë˜ìŠ¤ ì¶”ê°€
                
                // 0.5ì´ˆ í›„ì— í´ë˜ìŠ¤ ì œê±°í•´ì„œ ê¹œë¹¡ì„ íš¨ê³¼
                setTimeout(() => {
                    displayPanel.classList.remove(type);
                }, 500);
            }

            // ì •ë‹µ í™•ì¸
            function checkAnswer() {
                // ì´ í•¨ìˆ˜ëŠ” userInputì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í˜¸ì¶œë¨
                
                // ì…ë ¥ì´ ì—†ìœ¼ë©´ ì²´í¬ ì•ˆí•¨
                if (userInput === "") {
                    return;
                }
                
                const userNum = parseInt(userInput, 10);

                if (userNum === currentAnswer) {
                    // --- 1. ì •ë‹µì¼ ê²½ìš° ---
                    showFeedback('correct');
                    successSound.triggerAttackRelease("C5", "8n"); // "ëµ"
                    setTimeout(() => successSound.triggerAttackRelease("G5", "8n"), 150); // "ë™"
                    
                    // [NEW] íˆìŠ¤í† ë¦¬ ë¡œê·¸ ì¶”ê°€
                    const logEntry = document.createElement('p');
                    logEntry.textContent = `âœ… ${currentDan} X ${currentStep} = ${currentAnswer}`;
                    // "ì •ë‹µ ê¸°ë¡" í…ìŠ¤íŠ¸ê°€ ìˆìœ¼ë©´ ì§€ìš°ê¸°
                    if (historyLog.children.length === 1 && historyLog.children[0].textContent.includes('ì •ë‹µ ê¸°ë¡')) {
                        historyLog.innerHTML = '';
                    }
                    historyLog.appendChild(logEntry);
                    historyLog.scrollTop = historyLog.scrollHeight; // Auto-scroll to bottom

                    answerText.textContent = currentAnswer;
                    answerText.style.color = 'var(--primary-color)';
                    currentStep++; // ë‹¤ìŒ ë‹¨ê³„ë¡œ

                    if (currentStep > 9) {
                        // --- 1-1. 9ë‹¨ê¹Œì§€ ëª¨ë‘ ë§íŒ ê²½ìš° ---
                        currentStep = 1;
                        
                        // "ì™€ìš°!" ì¶•í•˜ ë©”ì‹œì§€ (ì¦‰ì‹œ)
                        speak("ì™€ìš°! ì˜í–ˆì–´! ìµœê³ ì•¼!", 1.3, 1);
                        
                        // 2.5ì´ˆ ë’¤ ë‹¤ìŒ ë‹¨ìœ¼ë¡œ ë„˜ì–´ê°
                        setTimeout(() => {
                            currentDan++; // ë‹¤ìŒ ë‹¨ìœ¼ë¡œ
                            if (currentDan > 9) {
                                currentDan = 2; // 9ë‹¨ ëë‚˜ë©´ 2ë‹¨ìœ¼ë¡œ
                                historyLog.innerHTML = '<p style="color: #9ca3af; text-align: center; margin-top: 0.5rem;">ì •ë‹µ ê¸°ë¡</p>'; // íˆìŠ¤í† ë¦¬ ì´ˆê¸°í™”
                                speak("ëª¨ë‘ ì™„ë£Œ! 2ë‹¨ë¶€í„° ë‹¤ì‹œ ì‹œì‘!", 1.3, 1);
                            } else {
                                speak(`${currentDan}ë‹¨ ì‹œì‘!`, 1.3, 1);
                            }
                            
                            // UI ì—…ë°ì´íŠ¸
                            title.textContent = `ğŸµë”°ë¼ì½ëŠ” êµ¬êµ¬ë‹¨ (${currentDan}ë‹¨)`;
                            readButton.textContent = `${currentDan}ë‹¨ ë¶ˆëŸ¬ì£¼ê¸°`;
                            loadProblem(); // ìƒˆ ë¬¸ì œ ë¡œë“œ
                            
                        }, 2500); // ì¶•í•˜ ë©”ì‹œì§€ í›„ ë”œë ˆì´

                    } else {
                        // --- 1-2. ë‹¤ìŒ ë¬¸ì œ (9ë‹¨ ë¯¸ë§Œ) ---
                        // ë‹¤ìŒ ë¬¸ì œ (2ì´ˆ ë’¤)
                        setTimeout(loadProblem, 2000);
                    }

                } else if (userInput.length >= String(currentAnswer).length && userInput.length > 0) {
                    // --- 2. ì˜¤ë‹µì¼ ê²½ìš° (ì •ë‹µ ìë¦¬ìˆ˜ë§Œí¼ ì°¼ëŠ”ë° ë‹¤ë¥¼ ë•Œ) ---
                    showFeedback('incorrect');
                    speak("í•œë²ˆ ë”", 1.3, 1); 
                    
                    answerText.style.color = 'var(--danger-color)';
                    
                    // 1ì´ˆ í›„ì— ì…ë ¥ ì´ˆê¸°í™”
                    setTimeout(() => {
                        userInput = "";
                        answerText.textContent = "?";
                        answerText.style.color = 'var(--secondary-color)';
                    }, 1500);
                }
            }
            
            // 2ë‹¨ ë¶ˆëŸ¬ì£¼ê¸° í•¨ìˆ˜ (íì‰ ë°©ì‹ ìœ ì§€)
            function readAloud() {
                startAudio(); // ì˜¤ë””ì˜¤ ì‹œì‘
                
                if (synth.speaking) {
                    synth.cancel();
                    readButton.textContent = `${currentDan}ë‹¨ ë¶ˆëŸ¬ì£¼ê¸°`;
                    readButton.disabled = false;
                    return;
                }

                // ìŒì„± ëŒ€ê¸°ì—´ ìƒì„±
                let utteranceQueue = [];
                const danKorean = numToKorean(currentDan); // [NEW] ì˜ˆ: "ì´"

                for (let i = 1; i <= 9; i++) {
                    // [MODIFIED] TTSê°€ ìˆ«ìë¥¼ ì •í™•íˆ ì½ë„ë¡ ìˆ˜ì •
                    const resultNum = currentDan * i;
                    const resultKorean = numToKorean(resultNum); // ì˜ˆ: "ì‹­íŒ”"
                    const iKorean = numToKorean(i); // ì˜ˆ: "êµ¬"
                    
                    const text = `${danKorean} ${iKorean}ì€ ${resultKorean}`; // ì˜ˆ: "ì´ êµ¬ëŠ” ì‹­íŒ”"
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'ko-KR'; // í•œêµ­ì–´ ì„¤ì •
                    utterance.rate = 1.0; // ë¶ˆëŸ¬ì£¼ê¸°ëŠ” ë³´í†µ ì†ë„
                    utterance.pitch = 1.2; // í†¤ë§Œ ë†’ê²Œ
                    if (koVoice) utterance.voice = koVoice;
                    
                    // íì— ì¶”ê°€
                    utteranceQueue.push(utterance);
                }
                
                // ë§ˆì§€ë§‰ ìŒì„±ì´ ëë‚˜ë©´ ë²„íŠ¼ ë³µêµ¬
                utteranceQueue[utteranceQueue.length - 1].onend = () => {
                    readButton.textContent = `${currentDan}ë‹¨ ë¶ˆëŸ¬ì£¼ê¸°`;
                    readButton.disabled = false;
                };

                // ë²„íŠ¼ ë¹„í™œì„±í™” ë° í…ìŠ¤íŠ¸ ë³€ê²½
                readButton.textContent = "ğŸ”Š ì½ëŠ” ì¤‘... (ì¤‘ì§€)";
                readButton.disabled = false; // ì¤‘ì§€í•  ìˆ˜ ìˆë„ë¡ ì¦‰ì‹œ í™œì„±í™”
                
                // íì— ìˆëŠ” ëª¨ë“  ìŒì„± ìˆœì°¨ì ìœ¼ë¡œ ì¬ìƒ
                utteranceQueue.forEach(u => synth.speak(u));
            }


            // --- 5. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²° ---

            // í‚¤íŒ¨ë“œ (ì´ë²¤íŠ¸ ìœ„ì„ ì‚¬ìš©)
            keypad.addEventListener('click', async (event) => {
                await startAudio(); // ì²« í´ë¦­ ì‹œ ì˜¤ë””ì˜¤ í™œì„±í™”
                
                // ìˆ«ì ë²„íŠ¼(.num-btn)ì´ ì•„ë‹ˆë©´ ë¬´ì‹œ
                if (event.target.classList.contains('num-btn')) {
                    const num = event.target.dataset.num;
                    
                    // [MODIFIED] ì…ë ¥ ê¸¸ì´ ì œí•œ (ìµœëŒ€ 2ìë¦¬)
                    if (userInput.length >= 2) {
                        return; // 2ìë¦¬ ì°¼ìœ¼ë©´ ë” ì…ë ¥ ì•ˆë¨
                    }
                    
                    userInput += num;
                    
                    // [MODIFIED] í•©ì³ì§„ ìˆ«ìë¥¼ í•œê¸€ë¡œ ì½ê¸°
                    const userNumKorean = numToKorean(parseInt(userInput, 10));
                    speak(userNumKorean, 1.5, 1.2); 
                    
                    answerText.textContent = userInput;
                    answerText.style.color = 'var(--text-color)';
                    
                    // ì •ë‹µ ì²´í¬ (ì •ë‹µ ìë¦¬ìˆ˜ì™€ ê°™ì•„ì¡Œì„ ë•Œë§Œ ì²´í¬)
                    if (userInput.length >= String(currentAnswer).length) {
                        checkAnswer();
                    }
                }
            });

            // ì§€ìš°ê¸° ë²„íŠ¼
            clearButton.addEventListener('click', () => {
                startAudio();
                userInput = "";
                answerText.textContent = "?";
                answerText.style.color = 'var(--secondary-color)';
            });

            // 2ë‹¨ ë¶ˆëŸ¬ì£¼ê¸° ë²„íŠ¼
            readButton.addEventListener('click', readAloud);

            // --- 6. ê²Œì„ ì‹œì‘ ---
            loadProblem();

        });
    </script>

</body>
</html>

